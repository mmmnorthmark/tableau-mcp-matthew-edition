# Tableau MCP Server - Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# Tableau Server Configuration
# =============================================================================

# Tableau Server URL (include https://)
TABLEAU_SERVER_URL=https://eu-west-1a.online.tableau.com

# Tableau site name (appears in URLs after /site/)
TABLEAU_SITE_NAME=your-site-name

# Tableau API version (optional, defaults to latest)
# TABLEAU_API_VERSION=3.22


# =============================================================================
# Tableau Connected Apps Authentication (JWT Method)
# =============================================================================

# Get these values from your Tableau Server/Cloud Connected Apps settings
# Learn more: https://help.tableau.com/current/online/en-us/connected_apps.htm

# Connected App Client ID (UUID format)
TABLEAU_CLIENT_ID=your-connected-app-client-id

# Connected App Secret ID (UUID format)
TABLEAU_SECRET_ID=your-connected-app-secret-id

# Connected App Secret Value (base64 encoded secret)
TABLEAU_SECRET_VALUE=your-connected-app-secret-value

# JWT Subject Claim (usually the user's email or username)
JWT_SUB_CLAIM=your-email@example.com


# =============================================================================
# Alternative: Personal Access Token Authentication
# =============================================================================

# If you prefer to use Personal Access Tokens instead of Connected Apps:
# TABLEAU_API_TOKEN=your-personal-access-token
# TABLEAU_API_TOKEN_NAME=your-token-name


# =============================================================================
# MCP Server Configuration
# =============================================================================

# Port for the MCP server (default: 3000)
PORT=3000

# Node environment
NODE_ENV=development


# =============================================================================
# Caching Configuration
# =============================================================================

# Cache type: 'memory' (default) or 'redis'
CACHE_TYPE=memory

# Redis URL (only needed if CACHE_TYPE=redis)
# REDIS_URL=redis://localhost:6379

# Cache TTL overrides (in seconds, optional)
# CACHE_TTL_METRIC_DEFINITIONS=300  # 5 minutes
# CACHE_TTL_METRIC_DATA=60          # 1 minute
# CACHE_TTL_INSIGHTS=60             # 1 minute


# =============================================================================
# OpenAI Apps SDK Integration
# =============================================================================

# CORS origins for OpenAI Apps SDK (comma-separated)
CORS_ALLOWED_ORIGINS=https://chat.openai.com,https://chatgpt.com,http://localhost:3000

# Widget version (for cache busting)
WIDGET_VERSION=4


# =============================================================================
# Security & Domain Configuration
# =============================================================================

# IMPORTANT: In Tableau Connected Apps settings, you must:
# 1. Add these domains to the allowlist:
#    - https://chat.openai.com
#    - https://chatgpt.com
# 2. Enable "Site embedding" for ChatGPT origins
# 3. Set appropriate JWT token expiration (recommended: 5 minutes)

# IMPORTANT: Never commit this file with real credentials!
# Add .env to .gitignore


# =============================================================================
# Optional: Logging & Monitoring
# =============================================================================

# Log level: 'debug', 'info', 'warn', 'error'
LOG_LEVEL=info

# Enable request logging
# ENABLE_REQUEST_LOGGING=true

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=your-sentry-dsn
